CREATE TABLE IF NOT EXISTS orderbook (
    pair VARCHAR(13) PRIMARY KEY,
    asks JSON NOT NULL,
    bids JSON NOT NULL
);

-- queries

getAll:
SELECT * FROM orderbook;

getForPair:
SELECT * FROM orderbook
WHERE pair = :pair;

save:
INSERT INTO orderbook (pair, asks, bids)
VALUES (:pair, :asks, :bids)
ON CONFLICT (pair) DO UPDATE
SET
    asks = EXCLUDED.asks,
    bids = EXCLUDED.bids;